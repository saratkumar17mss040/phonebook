(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(15),o=n.n(a),i=n(6),u=n(3),s=n(0),l=function(e){var t=e.name;return Object(s.jsx)("h2",{children:t})},d=function(e){var t=e.newName,n=e.newNumber,r=e.addNewName,c=e.updateByField;return Object(s.jsxs)("form",{onSubmit:r,children:[Object(s.jsxs)("div",{children:["Name:"," ",Object(s.jsx)("input",{type:"text",value:t,onChange:c("name"),required:!0})]}),Object(s.jsxs)("div",{children:["Phone number:"," ",Object(s.jsx)("input",{type:"number",value:n,onChange:c("number"),required:!0})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var t=e.filterName,n=e.updateByField;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("p",{children:"Filter shown with:"}),Object(s.jsx)("input",{onChange:n("filterName"),type:"text",value:t})]})},f=function(e){var t=e.persons,n=e.deletePerson;return t.map((function(e){var t=e.id,r=e.name,c=e.number;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{children:[r," ",c]}),Object(s.jsx)("button",{onClick:function(){return n(t)},type:"button",children:"delete"})]},t)}))},b=function(e){var t=e.filterName,n=e.persons,r=e.deletePerson;if(""===t)return Object(s.jsx)(f,{persons:n,deletePerson:r});var c=n.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()}));return Object(s.jsx)(f,{persons:c,deletePerson:r})},m=n(4),h=n.n(m),p="/api/persons",O={getAll:function(){return h.a.get(p).then((function(e){return e.data}))},create:function(e){return h.a.post(p,e).then((function(e){return e.data}))},update:function(e,t){return h.a.put("".concat(p,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return h.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))}},x=function(e){var t=e.message;return null===t?null:Object(s.jsx)("div",{className:"N"===t[0]?"notification":"error",children:Object(s.jsx)("em",{children:Object(s.jsx)("p",{children:t})})})},v=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(u.a)(a,2),f=o[0],m=o[1],h=Object(r.useState)(""),p=Object(u.a)(h,2),v=p[0],N=p[1],w=Object(r.useState)(""),g=Object(u.a)(w,2),y=g[0],C=g[1],k=Object(r.useState)(null),P=Object(u.a)(k,2),S=P[0],F=P[1];Object(r.useEffect)((function(){O.getAll().then((function(e){c(e)})).catch((function(e){console.error(e)}))}),[]);var B=function(e){return function(t){"name"===e?m(t.target.value):"number"===e?N(t.target.value):"filterName"===e&&C(t.target.value)}};return Object(s.jsxs)("div",{className:"main",children:[Object(s.jsx)(x,{message:S}),Object(s.jsx)(l,{name:"Phonebook application"}),Object(s.jsx)(j,{filterName:y,updateByField:B}),Object(s.jsx)(l,{name:"Add a new person"}),Object(s.jsx)(d,{newName:f,newNumber:v,addNewName:function(e){e.preventDefault();var t=n.filter((function(e){return e.name.toLowerCase()===f.toLowerCase()}));if(0!==t.length){var r=t[0].number,a=t[0],o=Object(i.a)(Object(i.a)({},a),{},{number:v}),u=window.confirm("Notification: ".concat(f," is already added to the phonebook, replace the old number with a new one ?"));u&&r===v?alert("Notification: ".concat(f,", it seems the new number is same as the old one. Try entering a new number")):u?O.update(o.id,o).then((function(e){c(n.map((function(t){return t.id===a.id?e:t}))),F("Notification: ".concat(e.name," was successfully updated")),setTimeout((function(){F(null)}),4e3),m(""),N("")})).catch((function(e){F(e.response.data.error),setTimeout((function(){F(null)}),4e3)})):(alert("Notification: Update operation got cancelled"),m(""),N(""))}else{var s={name:f,number:v};O.create(s).then((function(e){c(n.concat(e)),F("Notification: Added ".concat(f)),setTimeout((function(){F(null)}),4e3)})).catch((function(e){console.error(e),F(e.response.data.error),setTimeout((function(){F(null)}),4e3)})),m(""),N("")}},updateByField:B}),Object(s.jsx)(l,{name:"Numbers"}),Object(s.jsx)(b,{filterName:y,persons:n,deletePerson:function(e){var t=n.filter((function(t){return t.id===e})),r="Delete ".concat(t[0].name," ?"),a=t[0].name;window.confirm(r)?(O.remove(e).catch((function(e){return console.error(e)})),alert("Notification: ".concat(a," successfully deleted !")),c(n.filter((function(t){return t.id!==e})))):alert("Notification: Delete operation got cancelled")}})]})};n(39);o.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(v,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f65c5ddf.chunk.js.map